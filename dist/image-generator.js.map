{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./.clone/experiments/image-generator/SetDataTab.help.html","webpack:///./.clone/experiments/common/wait.ts","webpack:///./.clone/experiments/google/gapi.ts","webpack:///./.clone/experiments/image-generator/LoadImageTab.help.html","webpack:///./.clone/experiments/image-generator/LoadDataTab.help.html","webpack:///./.clone/experiments/common/AsyncButton.js","webpack:///./.clone/experiments/common/defines.js","webpack:///./.clone/experiments/common/HR.js","webpack:///./.clone/experiments/common/ToolbarWithText.tsx","webpack:///./.clone/experiments/common/useWindowDimensions.js","webpack:///./.clone/experiments/image-generator/base64.js","webpack:///./.clone/experiments/image-generator/createPNG.js","webpack:///./.clone/experiments/image-generator/GoogleSheetsDataLoader.tsx","webpack:///./.clone/experiments/common/HelpPanel.js","webpack:///./.clone/experiments/image-generator/ImageLoader.tsx","webpack:///./.clone/experiments/image-generator/ImageLoaderSources.tsx","webpack:///./.clone/experiments/image-generator/LoadImageTab.tsx","webpack:///./.clone/experiments/image-generator/LoadDataTab.tsx","webpack:///./.clone/experiments/common/Center.js","webpack:///./.clone/experiments/google/picker.js","webpack:///./.clone/experiments/image-generator/DataPicker.js","webpack:///./.clone/experiments/image-generator/EditableText.js","webpack:///./.clone/experiments/image-generator/DataInput.js","webpack:///./.clone/experiments/image-generator/SetDataTab.js","webpack:///./.clone/experiments/image-generator/svg.ts","webpack:///./.clone/experiments/image-generator/svg-iframe.ts","webpack:///./.clone/experiments/image-generator/isListItem.js","webpack:///./.clone/experiments/image-generator/reducer-utils.js","webpack:///./.clone/experiments/common/minMax.js","webpack:///./.clone/experiments/image-generator/reducer.ts","webpack:///./.clone/experiments/image-generator/App.tsx","webpack:///./.clone/experiments/image-generator/index.js","webpack:///./.clone/experiments/google/sheets.ts","webpack:///./.clone/experiments/common/ErrorBox.js","webpack:///./.clone/experiments/common/preventDefault.js","webpack:///./.clone/experiments/sheets/SheetsExplorer.tsx","webpack:///./.clone/experiments/common/uuid.js","webpack:///./.clone/experiments/common/ClickableFieldset.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","parentHotUpdateCallback","window","hotAvailableFilesMap","hotRequestedFilesMap","hotUpdate","hotWaitingFiles","hotChunksLoading","hotUpdateDownloaded","hotAddUpdateChunk","hotCurrentChildModule","hotApplyOnUpdate","hotCurrentHash","hotCurrentModuleData","hotCurrentParents","hotCurrentParentsTemp","hotCreateModule","hot","_acceptedDependencies","_declinedDependencies","_selfAccepted","_selfDeclined","_disposeHandlers","_main","active","accept","dep","callback","undefined","decline","dispose","addDisposeHandler","removeDisposeHandler","idx","indexOf","check","hotCheck","hotApply","status","l","hotStatus","hotStatusHandlers","addStatusHandler","removeStatusHandler","hotSetStatus","newStatus","hotDeferred","hotUpdateNewHash","hotWaitingFilesMap","toModuleId","id","Error","requestTimeout","Promise","resolve","reject","XMLHttpRequest","request","requestPath","p","open","timeout","send","err","onreadystatechange","readyState","update","JSON","parse","responseText","e","then","c","h","promise","hotEnsureUpdateChunk","script","document","createElement","charset","src","head","appendChild","hotDownloadUpdateChunk","deferred","outdatedModules","options","cb","module","getAffectedStuff","updateModuleId","outdatedDependencies","queue","map","chain","queueItem","pop","installedModules","type","parents","parentId","parent","concat","addAllToSet","a","b","item","appliedUpdate","warnUnexpectedRequire","console","warn","abortError","doApply","doDispose","chainInfo","join","onDeclined","ignoreDeclined","onUnaccepted","ignoreUnaccepted","onAccepted","onDisposed","outdatedSelfAcceptedModules","errorHandler","keys","forEach","hotDisposeChunk","dependency","moduleOutdatedDependencies","slice","disposeHandlers","children","child","error","callbacks","onErrored","dependencyId","ignoreErrored","err2","originalError","5","exports","me","fn","ObjectFactory","name","configurable","enumerable","get","set","value","defineProperty","finishChunkLoading","t","mode","hotCreateRequire","m","d","getter","o","r","Symbol","toStringTag","__esModule","ns","create","key","bind","n","object","property","jsonpArray","oldJsonpFunction","wait","ms","setTimeout","waitFor","timeoutMs","checkEveryMs","checkFn","now","Date","checkValue","googToPromise","goog","gapiLoad","libraries","gapiPresentTimeout","gapiLoadLibrariesTimeout","usualGAPIScriptUrl","gapi","msg","querySelector","load","onerror","ontimeout","gapiLoadClientAuth2","initGoogleClient","apiKey","clientId","discoveryDocs","scope","onSignInChanged","log","initOpts","client","init","auth2","getAuthInstance","isSignedIn","listen","AsyncButton","onClick","rest","React","useState","processing","setProcessing","_onClick","preventDefault","Button","variant","disabled","CircularProgress","size","style","marginLeft","GIT_SHORT","GIT_DATE","withTheme","primary","theme","palette","border","main","opacity","marginTop","marginBottom","width","ToolbarWithText","title","text","Toolbar","Typography","color","flexGrow","align","ToolbarWithVersion","gitShort","dateStr","gitDate","replace","getWindowDimensions","innerWidth","height","innerHeight","encode","str","encoding","bytes","TextEncoder","TextEncoderLite","base64js","fromByteArray","screenshotEndpointProd","createPNG","svgSource","convertImageEndpoint","Base64Encode","fetch","method","body","stringify","headers","resp","ok","base64image","endpoint","GoogleSheetsDataLoader","inititialSpreadsheetId","onSpreadsheetLoaded","spreadsheetId","setSpreadsheetId","loadProgress","setLoadProgress","loadError","setLoadError","onClickLoadData","loadSpreadsheet","spreadsheet","onChange","target","String","makeSource","component","html","paddingBottom","ExpansionPanel","ExpansionPanelSummary","expandIcon","aria-controls","ExpansionPanelDetails","dangerouslySetInnerHTML","__html","ImageLoader","sources","state","setState","onChangeImgSource","url","setMode","onClickLoad","req","Request","cache","imgSource","substring","source","entries","ListSource","initialState","urls","onUrlSelected","onChangeState","setUrl","state2","GooglePhotosSource","TextBoxSource","display","flex","helpHtml","require","LoadImageTab","onChangeSVGSource","onLoadImageUrlSelected","setComponentState","newState","imageLoaderSources","urlList","googlePhotos","anyUrl","any","HelpPanel","LoadDataTab","dataSources","sheets","ClickableFieldset","legend","SheetsExplorer","dataSource","textAlign","pick","onPickerLoaded","onBeforeSetVisible","pickerCallback","createPicker","loadAuth2API","loadPickerAPI","pickerApiLoaded","authInstance","oauthToken","currentUser","getAuthResponse","access_token","client_id","googleAuth","signIn","authResponse","vw","Math","max","documentElement","clientWidth","vh","clientHeight","builder","google","picker","PickerBuilder","setOAuthToken","setDeveloperKey","setCallback","setSize","addView","ViewId","PHOTOS","SPREADSHEETS","DOCS_IMAGES","build","setVisible","response","action","auth2Promise","pickerPromise","all","extractPublicImageUrl","doc","serviceId","thumbnails","th","parts","split","extractPicasaUrl","isShared","extractDocsPhotoUrl","SheetValuePicker","sampleData","onSave","sheetIdx","setSheetIdx","sheet","Number","cellPadding","onClickCell","GoogleDocPicker","setError","onClickGoogleDoc","picked","docs","message","Center","ErrorBox","DataPicker","visible","onRequestClose","tabIdx","setTabIdx","label","SourceComponent","Dialog","onClose","zIndex","AppBar","position","Tabs","Tab","padding","EditableText","useLocalValue","onCancel","localValue","setLocalValue","onChangeValue","save","cancel","TextField","fullWidth","onKeyDown","args","handlers","Enter","Escape","handler","onBlur","Flex","DataInputItem","simpleValueSupplier","makeOnSave","setShowEditor","dirty","setDirty","data-idx","data-id","checked","_onChange","Fab","aria-label","onSaveCallback","DataInput","showEditor","listStyleType","margin","Boolean","SetDataTab","onChangeData","onClickUpdateImage","dataTimestamp","getSVGAttributeSize","svg","getAttribute","parseSVG","svgBoundingClientRect","getBoundingClientRect","dataIds","Array","from","querySelectorAll","el","filter","match","textContent","parseSampleData","makeRelativeImageLinksAbsolute","svgUrlStr","svgUrl","URL","image","xlinkNS","href","getAttributeNS","trim","setAttributeNS","toString","getElementValue","tagName","toLowerCase","startsWith","scaleSVGWithinIFrame","iframe","windowDimensions","shouldScale","SVG","svgRect","scale","min","transform","transformOrigin","scrolling","updateSVG","getElementById","setAttribute","setText","ownerDocument","isListItem","exec","arrayMoveValue","oldIndex","newIndex","replaceId","newId","oldItem","newItem","groupName","arg","minMax","reorder","to","startIndex","old","middle","reducer","setValue","prop","oldValue","newValue","valueName","dataIdx","data2","arraySetValue","svgUrls","pngURL","createPNGError","embeddedSampleData","imageLoaderFieldset","shouldScaleSVG","App","props","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","useWindowDimensions","dispatch","makePropReducer","iframeRef","svgFromIFrame","contentDocument","current","onClickCreatePNG","outerHTML","makeGoogleSheetsDataSource","combinedSampleData","properties","values","CssBaseline","defines","firstElementChild","innerHTML","ratio","iframeWidth","updateIFrameWithSVGSource","inline","FormGroup","row","FormControlLabel","control","Checkbox","overflow","ref","frameBorder","ReactDOM","render","initGoogleSheets","ensureProperty","ob","curProp","getValuesFromSheet","cellRange","range","spreadsheets","onProgress","spreadsheetUrl","raw","cssOuter","background","fontWeight","borderBottom","Table","className","random","cellSpacing","innerText","dataset","rowIndex","index","rowIdx","data-index","cell","cellIdx","data-row-index","onChangeSheetIdx","extraLegend","extraLegendSpace","help","helpMode","setHelpMode","textDecoration"],"mappings":"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","file":"image-generator.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdate\"];\n \twindow[\"webpackHotUpdate\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"\" + hotCurrentHash + \".hot-update.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"bbea46f76fb17eda76a2\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tfor(var chunkId in installedChunks)\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t5: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/br-experiments/dist/\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([420,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// Module\nvar code = \"<p>This section provides the ability to set image data.</p> <p>The data can be input manually, or chosen from loaded data.</p> <p>Each data item is identified by its <code>id</code> in the SVG.</p> \";\n// Exports\nmodule.exports = code;","export function wait(ms): Promise<void> {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function waitFor<T>(timeoutMs = 5 * 1000, checkEveryMs = 1 * 1000, checkFn: () => boolean): Promise<T> {\r\n  const now = +new Date();\r\n  let checkValue = null;\r\n  while (!(checkValue = checkFn())) {\r\n    if (+new Date() - now > timeoutMs) {\r\n      throw new Error(\"timeout\");\r\n    }\r\n    await wait(checkEveryMs);\r\n  }\r\n  return checkValue;\r\n}\r\n","import { waitFor } from \"../common/wait\";\r\n\r\nfunction googToPromise<T>(goog): Promise<T> {\r\n  return new Promise((resolve, reject) => goog.then(resolve, reject));\r\n}\r\n\r\nasync function gapiLoad(libraries): Promise<void> {\r\n  const gapiPresentTimeout = 5 * 1000;\r\n  const gapiLoadLibrariesTimeout = 5 * 1000;\r\n  const usualGAPIScriptUrl = \"https://apis.google.com/js/api.js\";\r\n\r\n  try {\r\n    await waitFor(gapiPresentTimeout, 100, () => typeof gapi !== \"undefined\");\r\n  } catch (err) {\r\n    let msg = `Timed out after ${gapiPresentTimeout}ms waiting for \"gapi\" global to be present.`;\r\n    const script = document.querySelector(`script[src='${usualGAPIScriptUrl}']`);\r\n    if (!script) {\r\n      msg += `\\nUsual gapi script not found (<script src=\"${usualGAPIScriptUrl}\">). Is the script present in the page?`;\r\n    }\r\n    throw new Error(msg);\r\n  }\r\n\r\n  return new Promise((resolve, reject) => {\r\n    gapi.load(libraries, {\r\n      callback: resolve,\r\n      onerror: reject,\r\n      timeout: gapiLoadLibrariesTimeout,\r\n      ontimeout: reject,\r\n    });\r\n  });\r\n}\r\n\r\nasync function gapiLoadClientAuth2(): Promise<void> {\r\n  return gapiLoad(\"client:auth2\");\r\n}\r\n\r\nasync function initGoogleClient({\r\n  apiKey,\r\n  clientId,\r\n  discoveryDocs,\r\n  scope,\r\n  onSignInChanged,\r\n}: {\r\n  apiKey?: string;\r\n  clientId?: string;\r\n  discoveryDocs?: string[];\r\n  scope?: string;\r\n  onSignInChanged?: string;\r\n}): Promise<void> {\r\n  console.log(\"initClient\");\r\n  try {\r\n    console.log(\"calling gapi.load\");\r\n    await gapiLoadClientAuth2();\r\n    const initOpts = {\r\n      apiKey,\r\n      clientId,\r\n      discoveryDocs,\r\n      scope,\r\n    };\r\n    console.log(\"calling gapi.client.init with opts\", { ...initOpts });\r\n    await gapi.client.init(initOpts);\r\n    console.log(\"calling gapi.client.init ok\");\r\n    // Listen for sign-in state changes.\r\n    if (typeof onSignInChanged === \"function\") {\r\n      console.log(\"gapi\", gapi);\r\n      console.log(\"gapi.auth2\", gapi.auth2);\r\n      console.log(\"gapi.auth2.getAuthInstance()\", gapi.auth2.getAuthInstance());\r\n      gapi.auth2.getAuthInstance().isSignedIn.listen(onSignInChanged);\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    throw err;\r\n  }\r\n}\r\n\r\nexport {\r\n  gapiLoad,\r\n  googToPromise,\r\n  initGoogleClient,\r\n};\r\n","// Module\nvar code = \"<p> This section provides the ability to load an SVG image from locations such as: </p><ul> <li>a pre-defined source (this website) </li><li>any public URL </li><li>Google Photos </li></ul> <p></p> <p> If you want to be able to set custom data/values in the SVG, then the SVG must have elements with ids. These ids are used by the site to pick out specific elements in the SVG. </p> <p> Currently, simple text values can be set, such as players names and image URLs. </p> <p> When you are happy with the image, press the CREATE PNG button to create a PNG version of the SVG. This PNG can then be used in social media posts. </p>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<p>This section provides the ability to load data from external sources, such as Google Sheets.</p> <p> Some SVGs have embedded data (that the author of the SVG has embedded), and that will also appear here. Embedded data is set in a <code>&lt;text&gt;</code> element in the SVG with <code>id=\\\"sample.data\\\"</code>. Embedded data is in JSON format and has the form <code>\\\"data-name\\\": [\\\"list\\\", \\\"of\\\", \\\"items\\\"]</code>, where you can have multiple data-names for different data. For example: <pre style=white-space:pre-wrap>\\r\\n&lt;svg&gt;\\r\\n...\\r\\n  &lt;text id=\\\"sample.data\\\"&gt;{\\r\\n    \\\"data.player.position\\\":[\\r\\n      \\\"C\\\",\\\"P\\\",\\\"1B\\\",\\\"2B\\\",\\\"3B\\\",\\r\\n      \\\"SS\\\",\\\"LF\\\",\\\"CF\\\",\\\"RF\\\"\\r\\n    ],\\r\\n    \\\"data.player.name\\\":[\\r\\n      \\\"Rich Green\\\",\\r\\n      \\\"Miguel Jurez\\\",\\r\\n      \\\"Nestor Martinez\\\"\\r\\n    ]\\r\\n  }&lt;/text&gt;\\r\\n...\\r\\n&lt;/svg&gt;\\r\\n</pre> </p> <p>The loaded data can then be used to set values within the SVG image.</p> <p> Once the data is loaded you will be able to view it all below. But you need to use the SET IMAGE DATA tab to actually use the data. </p> \";\n// Exports\nmodule.exports = code;","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\nexport default function AsyncButton({\r\n  children,\r\n  onClick,\r\n  ...rest\r\n}) {\r\n  const [processing, setProcessing] = React.useState(false);\r\n\r\n  const _onClick = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      setProcessing(true);\r\n      if (onClick) {\r\n        await onClick(e);\r\n      }\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"contained\"\r\n      onClick={_onClick}\r\n      disabled={processing}\r\n      {...rest}\r\n    >\r\n      {children}\r\n      {processing && (\r\n        <CircularProgress size={18} style={{ marginLeft: \"1em\" }} />\r\n      )}\r\n    </Button>\r\n  );\r\n}\r\n","// export globals exposed by webpack DefinePlugin\r\n\r\nexport default {\r\n  GIT_SHORT,\r\n  GIT_LONG,\r\n  GIT_DATE,\r\n  GIT_BRANCH,\r\n};\r\n","import React from \"react\";\r\nimport { withTheme } from \"@material-ui/core\";\r\n\r\nexport default withTheme(function HR({ theme }) {\r\n  const { primary } = theme.palette;\r\n  return <hr\r\n    style={{\r\n      border: `solid 1px ${primary.main}`,\r\n      opacity: 0.5,\r\n      marginTop: \"1em\",\r\n      marginBottom: \"1em\",\r\n      width: \"100%\",\r\n    }}\r\n  />;\r\n});\r\n","import * as React from \"react\";\r\n\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\ninterface ToolbarWithTextProps {\r\n  title: string;\r\n  text: string;\r\n}\r\n\r\nexport const ToolbarWithText: React.FC<ToolbarWithTextProps> = ({\r\n  title,\r\n  text,\r\n}: ToolbarWithTextProps) => (\r\n    // Use flexGrow to push the text to the right-hand side\r\n    <Toolbar>\r\n      <Typography variant=\"h6\" color=\"inherit\" style={{ flexGrow: 1 }}>{title}</Typography>\r\n      <Typography variant=\"body2\" color=\"inherit\" align=\"right\">{text}</Typography>\r\n    </Toolbar>\r\n  );\r\n\r\ninterface ToolbarWithVersionProps {\r\n  title: string;\r\n  gitShort: string;\r\n  gitDate: string;\r\n}\r\n\r\nexport const ToolbarWithVersion: React.FC<ToolbarWithVersionProps> = ({\r\n  title,\r\n  gitShort,\r\n  gitDate,\r\n}: ToolbarWithVersionProps) => {\r\n  // E.g. turn \"2020-02-27T14:56:34.000Z\" into \"2020-02-27\"\r\n  const dateStr = gitDate.replace(/T.*/, \"\");\r\n  return (\r\n    <ToolbarWithText title={title} text={`${gitShort} ${dateStr}`} />\r\n  );\r\n};\r\n","import { useState, useEffect } from \"react\";\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","// requires\r\n// https://cdn.jsdelivr.net/npm/base64-js@1.3.1/base64js.min.js\r\n// and\r\n// https://cdn.jsdelivr.net/npm/text-encoder-lite@2.0.0/text-encoder-lite.min.js\r\n// to be loaded\r\n\r\n/*\\\r\n|*|\r\n|*|  Base64 / binary data / UTF-8 strings utilities (#3)\r\n|*|\r\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\r\n|*|\r\n|*|  Author: madmurphy\r\n|*|\r\n\\*/\r\n\r\nexport function encode(str, encoding = 'utf-8') {\r\n  var bytes = new (typeof TextEncoder === \"undefined\" ? TextEncoderLite : TextEncoder)(encoding).encode(str);\r\n  return base64js.fromByteArray(bytes);\r\n}\r\n\r\nexport function decode(str, encoding = 'utf-8') {\r\n  var bytes = base64js.toByteArray(str);\r\n  return new (typeof TextDecoder === \"undefined\" ? TextDecoderLite : TextDecoder)(encoding).decode(bytes);\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*\r\nCopyright (c) 2011, Daniel Guerrero\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are met:\r\n    * Redistributions of source code must retain the above copyright\r\n      notice, this list of conditions and the following disclaimer.\r\n    * Redistributions in binary form must reproduce the above copyright\r\n      notice, this list of conditions and the following disclaimer in the\r\n      documentation and/or other materials provided with the distribution.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\r\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\nDISCLAIMED. IN NO EVENT SHALL DANIEL GUERRERO BE LIABLE FOR ANY\r\nDIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\nON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n/**\r\n * Uses the new array typed in javascript to binary base64 encode/decode\r\n * at the moment just decodes a binary base64 encoded\r\n * into either an ArrayBuffer (decodeArrayBuffer)\r\n * or into an Uint8Array (decode)\r\n * \r\n * References:\r\n * https://developer.mozilla.org/en/JavaScript_typed_arrays/ArrayBuffer\r\n * https://developer.mozilla.org/en/JavaScript_typed_arrays/Uint8Array\r\n */\r\n\r\nconst Base64Binary_ = {\r\n  _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\r\n  /* will return a  Uint8Array type */\r\n  decodeArrayBuffer: function(input) {\r\n    var bytes = (input.length / 4) * 3;\r\n    var ab = new ArrayBuffer(bytes);\r\n    this.decode(input, ab);\r\n\r\n    return ab;\r\n  },\r\n\r\n  removePaddingChars: function(input) {\r\n    var lkey = this._keyStr.indexOf(input.charAt(input.length - 1));\r\n    if (lkey == 64) {\r\n      return input.substring(0, input.length - 1);\r\n    }\r\n    return input;\r\n  },\r\n\r\n  decode: function(input, arrayBuffer) {\r\n    //get last chars to see if are valid\r\n    input = this.removePaddingChars(input);\r\n    input = this.removePaddingChars(input);\r\n\r\n    var bytes = parseInt((input.length / 4) * 3, 10);\r\n\r\n    var uarray;\r\n    var chr1, chr2, chr3;\r\n    var enc1, enc2, enc3, enc4;\r\n    var i = 0;\r\n    var j = 0;\r\n\r\n    if (arrayBuffer)\r\n      uarray = new Uint8Array(arrayBuffer);\r\n    else\r\n      uarray = new Uint8Array(bytes);\r\n\r\n    input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n    for (i = 0; i < bytes; i += 3) {\r\n      //get the 3 octects in 4 ascii chars\r\n      enc1 = this._keyStr.indexOf(input.charAt(j++));\r\n      enc2 = this._keyStr.indexOf(input.charAt(j++));\r\n      enc3 = this._keyStr.indexOf(input.charAt(j++));\r\n      enc4 = this._keyStr.indexOf(input.charAt(j++));\r\n\r\n      chr1 = (enc1 << 2) | (enc2 >> 4);\r\n      chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n      chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n      uarray[i] = chr1;\r\n      if (enc3 != 64) uarray[i + 1] = chr2;\r\n      if (enc4 != 64) uarray[i + 2] = chr3;\r\n    }\r\n\r\n    return uarray;\r\n  }\r\n}\r\n\r\nexport const Base64Binary = Base64Binary_;\r\n","import { encode as Base64Encode } from \"./base64\";\r\n\r\nconst convertImageEndpointLocal = \"http://localhost:9902/\";\r\nconst convertImageEndpointProd = \"https://us-central1-bladerunners.cloudfunctions.net/convertImage/\";\r\n//const screenshotEndpointLocal = \"http://localhost:9901/\";\r\nconst screenshotEndpointLocal = \"http://localhost:3000/prod/screenshot/\";\r\n//const screenshotEndpointProd = \"https://us-central1-bladerunners.cloudfunctions.net/screenshot/\";\r\nconst screenshotEndpointProd = \"https://k16z8cm9r9.execute-api.eu-west-2.amazonaws.com/prod/screenshot/\";\r\n\r\nexport default async function createPNG(svgSource) {\r\n  const convertImageEndpoint = screenshotEndpointProd;\r\n\r\n  try {\r\n    const s = Base64Encode(svgSource);\r\n    const data = {\r\n      \"image.name\": \"image.svg\",\r\n      \"image.type\": \"svg\",\r\n      \"image.data\": s,\r\n    };\r\n\r\n    const resp = await fetch(convertImageEndpoint, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    if (!resp.ok) {\r\n      const text = await resp.text();\r\n      const err = new Error();\r\n      err.createPNG = {\r\n        status: resp.status,\r\n        text,\r\n      };\r\n      throw err;\r\n    }\r\n\r\n    const base64image = await resp.text();\r\n    return \"data:image/png;base64,\" + base64image;\r\n  } catch (err) {\r\n    console.error(err);\r\n    err.createPNG = {\r\n      ...err.createPNG,\r\n      endpoint: convertImageEndpoint,\r\n    };\r\n    throw err;\r\n  }\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport AsyncButton from \"../common/AsyncButton\";\r\nimport { loadSpreadsheet, LoadedSpreadsheet } from \"../google/sheets\";\r\n\r\ninterface GoogleSheetsDataLoaderProps {\r\n  inititialSpreadsheetId: string;\r\n  apiKey: string;\r\n  clientId: string;\r\n  onSpreadsheetLoaded: (LoadedSpreadsheet) => void;\r\n}\r\n\r\nexport default function GoogleSheetsDataLoader({\r\n  inititialSpreadsheetId,\r\n  apiKey,\r\n  clientId,\r\n  onSpreadsheetLoaded,\r\n}: GoogleSheetsDataLoaderProps): React.ReactElement | null {\r\n  console.log(\"GoogleSheetsDataLoader\", clientId, apiKey, inititialSpreadsheetId);\r\n\r\n  const [spreadsheetId, setSpreadsheetId] = React.useState(inititialSpreadsheetId);\r\n  const [loadProgress, setLoadProgress] = React.useState(null);\r\n  const [loadError, setLoadError] = React.useState(null);\r\n\r\n  const onClickLoadData = async (e) => {\r\n    setLoadError(null);\r\n    if (spreadsheetId) {\r\n      try {\r\n        const spreadsheet = await loadSpreadsheet(apiKey, clientId, spreadsheetId, setLoadProgress);\r\n        setLoadProgress(null);\r\n        console.log(spreadsheet);\r\n        onSpreadsheetLoaded && onSpreadsheetLoaded(spreadsheet);\r\n      } catch (err) {\r\n        console.error(\"onClickLoadData\");\r\n        console.error(err);\r\n        setLoadError(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AsyncButton onClick={onClickLoadData}>Load</AsyncButton>\r\n      {\" \"}\r\n      Sheet id: <input size={24} value={spreadsheetId} onChange={(e) => setSpreadsheetId(e.target.value)} />\r\n      {loadProgress && <div>{loadProgress}</div>}\r\n      {loadError && <div>{String(loadError)}</div>}\r\n    </>\r\n  );\r\n}\r\n\r\nexport interface DataSource {\r\n  title: () => string;\r\n  component: () => React.ReactElement;\r\n}\r\n\r\nexport function makeSource({\r\n  inititialSpreadsheetId,\r\n  apiKey,\r\n  clientId,\r\n  onSpreadsheetLoaded,\r\n}): DataSource {\r\n  return {\r\n    title() {\r\n      return \"Google Sheets\";\r\n    },\r\n    component() {\r\n      return <GoogleSheetsDataLoader\r\n        apiKey={apiKey}\r\n        clientId={clientId}\r\n        inititialSpreadsheetId={inititialSpreadsheetId}\r\n        onSpreadsheetLoaded={onSpreadsheetLoaded}\r\n      />;\r\n    },\r\n  } as DataSource;\r\n}\r\n","import React from \"react\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nexport default ({\r\n  html,\r\n}) => (\r\n    <div style={{ paddingBottom: \"1em\" }}>\r\n      <ExpansionPanel>\r\n        <ExpansionPanelSummary\r\n          expandIcon={<ExpandMoreIcon />}\r\n          aria-controls=\"panel1a-content\"\r\n          id=\"panel1a-header\"\r\n        >\r\n          <Typography>Help</Typography>\r\n        </ExpansionPanelSummary>\r\n        <ExpansionPanelDetails>\r\n          <Typography dangerouslySetInnerHTML={{ __html: html }}></Typography>\r\n        </ExpansionPanelDetails>\r\n      </ExpansionPanel>\r\n    </div>\r\n  );\r\n","import * as React from \"react\";\r\n\r\nimport AsyncButton from \"../common/AsyncButton\";\r\n\r\nexport interface ImageLoaderSource {\r\n  title: () => string;\r\n  component: () => React.ReactElement | null;\r\n}\r\n\r\nexport interface ImageLoaderProps {\r\n  sources: {\r\n    [key: string]: ImageLoaderSource;\r\n  };\r\n  state;\r\n  setState: (callback: (state) => any) => void;\r\n  onChangeImgSource: (svgSource: string, svgUrl: string) => void;\r\n}\r\n\r\nexport default function ImageLoader({\r\n  sources,\r\n  state,\r\n  setState,\r\n  onChangeImgSource,\r\n}: ImageLoaderProps): React.ReactElement | null {\r\n  const { mode, url } = state || {};\r\n\r\n  const setMode = (mode) => setState((state) => ({\r\n    ...state,\r\n    mode,\r\n  }));\r\n\r\n  React.useEffect(() => {\r\n    if (state && !state.mode) {\r\n      setMode(Object.keys(sources)[0]);\r\n    }\r\n  }, []);\r\n\r\n  if (!mode) {\r\n    return <div>{\"No loader source selected\"}</div>;\r\n  }\r\n\r\n  const onClickLoad = async (e) => {\r\n    e.preventDefault();\r\n    // https://fetch.spec.whatwg.org/#dom-requestinit-cache\r\n    const req = new Request(url, {\r\n      cache: \"reload\",\r\n    });\r\n    console.log(req);\r\n    const resp = await fetch(req);\r\n    const text = await resp.text();\r\n    const i = text.indexOf(\"<svg\");\r\n    if (i >= 0) {\r\n      const imgSource = text.substring(i);\r\n      onChangeImgSource && onChangeImgSource(imgSource, resp.url);\r\n    }\r\n  };\r\n\r\n  const _onChangeMode = (e) => {\r\n    e.preventDefault();\r\n    setMode(e.target.value);\r\n  };\r\n\r\n  let component;\r\n  const source = sources[mode];\r\n  if (source) {\r\n    component = source.component();\r\n  }\r\n  console.log(mode, source, component);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        Image source: <select onChange={_onChangeMode}>{\r\n          Object.entries(sources)\r\n            .map(\r\n              ([key, { title }]) => <option key={key} value={key}>{title()}</option>\r\n            )\r\n        }</select>\r\n      </div>\r\n      <br />\r\n      {component}\r\n      <div style={{ marginTop: \"1em\" }}>\r\n        <AsyncButton onClick={onClickLoad}>Load</AsyncButton>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import * as React from \"react\";\r\n\r\n// All URL-selecting components must have a url property in their state.\r\n\r\nexport interface ListSourceProps {\r\n  initialState;\r\n  urls: string[];\r\n  onUrlSelected: (string) => void;\r\n  onChangeState: (state) => void;\r\n}\r\n\r\nexport function ListSource({\r\n  initialState,\r\n  urls,\r\n  onUrlSelected,\r\n  onChangeState,\r\n}: ListSourceProps): React.ReactElement | null {\r\n  const url = initialState && initialState.url;\r\n\r\n  console.log(\"ListSource\", url);\r\n\r\n  const setUrl = (url) => {\r\n    const state2 = {\r\n      ...initialState,\r\n      url,\r\n    };\r\n    onChangeState && onChangeState(state2);\r\n    onUrlSelected && onUrlSelected(url);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!url) {\r\n      setUrl(urls[0]);\r\n    }\r\n  }, [url]);\r\n\r\n  const onChange = (e) => {\r\n    e.preventDefault();\r\n    const url = e.target.value;\r\n    setUrl(url);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      Local URL:{\" \"}\r\n      <select value={url || \"\"} onChange={onChange}>\r\n        {\r\n          urls && (\r\n            urls.map((url, i) => <option key={i} value={url}>{url}</option>)\r\n          )\r\n        }\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport interface GooglePhotosSourceProps {\r\n  initialState;\r\n  onUrlSelected: (string) => void;\r\n  onChangeState: (state) => void;\r\n}\r\n\r\nexport function GooglePhotosSource({\r\n  initialState,\r\n  onUrlSelected,\r\n  onChangeState,\r\n}: GooglePhotosSourceProps): React.ReactElement | null {\r\n  return (\r\n    <div>\r\n      Google Photos URL:{\" \"}\r\n      <button>TODO</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport interface TextBoxSourceProps {\r\n  initialState;\r\n  onUrlSelected: (string) => void;\r\n  onChangeState: (state) => void;\r\n}\r\n\r\nexport function TextBoxSource({\r\n  initialState,\r\n  onUrlSelected,\r\n  onChangeState,\r\n}: TextBoxSourceProps): React.ReactElement | null {\r\n  const url = initialState && initialState.url;\r\n\r\n  console.log(\"TextBoxSource\", url);\r\n\r\n  const onChange = (e) => {\r\n    e.preventDefault();\r\n    const url = e.target.value;\r\n    const state2 = {\r\n      ...initialState,\r\n      url,\r\n    };\r\n    onChangeState && onChangeState(state2);\r\n    onUrlSelected && onUrlSelected(url);\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n      URL:{\"\\u00A0\"}\r\n      <input type=\"text\" value={url || \"\"} onChange={onChange} style={{ flex: \"1\" }} />\r\n    </div>\r\n  );\r\n}\r\n\r\n","import * as React from \"react\";\r\n\r\nimport HelpPanel from \"../common/HelpPanel\";\r\n\r\nimport ImageLoader from \"./ImageLoader\";\r\nimport {\r\n  TextBoxSource,\r\n  ListSource,\r\n  GooglePhotosSource,\r\n} from \"./ImageLoaderSources\"\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst helpHtml = require(\"./LoadImageTab.help.html\");\r\n\r\nexport interface LoadImageTabProps {\r\n  urls: string[];\r\n  state;\r\n  setState: (callback: (state) => any) => void;\r\n  onChangeSVGSource: (svgSource: string, svgUrl: string) => void;\r\n}\r\n\r\nfunction LoadImageTab({\r\n  urls,\r\n  state,\r\n  setState,\r\n  onChangeSVGSource,\r\n}: LoadImageTabProps): React.ReactElement | null {\r\n  console.log(\"LoadImageTab\", state);\r\n\r\n  const onLoadImageUrlSelected = (url) => {\r\n    console.log(\"onUrlSelected\", url);\r\n    setState((state) => ({\r\n      ...state,\r\n      url,\r\n    }));\r\n  };\r\n\r\n  const setComponentState = (name) => (newState) => {\r\n    console.log(\"setComponentState\", name, newState)\r\n    setState((state) => ({\r\n      ...state,\r\n      [name]: newState,\r\n    }));\r\n  };\r\n\r\n  const imageLoaderSources = {\r\n    urlList: {\r\n      title: () => \"Local Url\",\r\n      component() {\r\n        return <ListSource\r\n          urls={urls}\r\n          initialState={state && state.urlList}\r\n          onChangeState={setComponentState(\"urlList\")}\r\n          onUrlSelected={onLoadImageUrlSelected}\r\n        />;\r\n      },\r\n    },\r\n    googlePhotos: {\r\n      title: () => \"Google Photos\",\r\n      component() {\r\n        return <GooglePhotosSource\r\n          initialState={state && state.googlePhotos}\r\n          onChangeState={setComponentState(\"googlePhotos\")}\r\n          onUrlSelected={onLoadImageUrlSelected}\r\n        />;\r\n      },\r\n    },\r\n    anyUrl: {\r\n      title: () => \"Any Url\",\r\n      component() {\r\n        return <TextBoxSource initialState={state && state.any}\r\n          onChangeState={setComponentState(\"any\")}\r\n          onUrlSelected={onLoadImageUrlSelected}\r\n        />;\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <HelpPanel html={helpHtml} />\r\n      <ImageLoader\r\n        sources={imageLoaderSources}\r\n        state={state}\r\n        setState={setState}\r\n        onChangeImgSource={onChangeSVGSource}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoadImageTab;\r\n","import * as React from \"react\";\r\n\r\nimport ClickableFieldset from \"../common/ClickableFieldset\";\r\nimport HelpPanel from \"../common/HelpPanel\";\r\nimport SheetsExplorer from \"../sheets/SheetsExplorer\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nconst helpHtml = require(\"./LoadDataTab.help.html\");\r\n\r\n// TODO better types\r\nexport interface LoadDataTabProps {\r\n  data: object[];\r\n  dataSources: object[];\r\n}\r\n\r\nconst LoadDataTab: React.FC<LoadDataTabProps> = ({\r\n  data,\r\n  dataSources,\r\n}: LoadDataTabProps) => {\r\n  return (\r\n    <>\r\n      <HelpPanel html={helpHtml} />\r\n      {data && data.map(({ sheets, title }, i) => (\r\n        <div key={`data-${i}`} style={{ marginTop: \"1em\" }}>\r\n          <ClickableFieldset legend={title}>\r\n            <SheetsExplorer\r\n              sheets={sheets}\r\n            />\r\n          </ClickableFieldset>\r\n        </div>\r\n      ))}\r\n      {dataSources && dataSources.map((dataSource, i) => (\r\n        <div key={`data-source-${i}`} style={{ marginTop: \"1em\" }}>{dataSource.component()}</div>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default LoadDataTab;\r\n","import React from \"react\";\r\nimport { withTheme } from \"@material-ui/core\";\r\n\r\nexport default withTheme(function HR({ children }) {\r\n  return (\r\n    <div\r\n      style={{\r\n        textAlign: \"center\",\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n});\r\n","import { gapiLoad } from \"./gapi\";\r\n\r\nfunction pick({\r\n  clientId,\r\n  apiKey,\r\n  scope,\r\n  onPickerLoaded,\r\n  onBeforeSetVisible,\r\n}) {\r\n  scope = scope || [\r\n    \"https://www.googleapis.com/auth/photos\",\r\n    \"https://www.googleapis.com/auth/drive.file\",\r\n  ].join(\" \");\r\n\r\n  return new Promise(async (resolve, reject) => {\r\n    let pickerApiLoaded = false;\r\n    let oauthToken;\r\n\r\n    function pickerCallback(response) {\r\n      console.log(\"pickerCallback\", response);\r\n      if (response.action === \"loaded\") {\r\n        onPickerLoaded && onPickerLoaded(response);\r\n      } else {\r\n        resolve(response);\r\n      }\r\n    }\r\n\r\n    // Create and render a Picker object for picking:\r\n    // - user Photos.\r\n    // - user Spreadsheets.\r\n    function createPicker() {\r\n      console.log(\"createPicker\", pickerApiLoaded, oauthToken);\r\n      if (pickerApiLoaded && oauthToken) {\r\n        // get viewport size\r\n        const vw = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n        const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n        let builder = new google.picker.PickerBuilder()\r\n          .setOAuthToken(oauthToken)\r\n          .setDeveloperKey(apiKey)\r\n          .setCallback(pickerCallback)\r\n          .setSize(vw * 0.9, vh * 0.9);\r\n        if (onBeforeSetVisible) {\r\n          builder = onBeforeSetVisible && onBeforeSetVisible(builder);\r\n        } else {\r\n          builder = builder\r\n            .addView(google.picker.ViewId.PHOTOS)\r\n            .addView(google.picker.ViewId.SPREADSHEETS)\r\n            .addView(google.picker.ViewId.DOCS_IMAGES);\r\n        }\r\n        const picker = builder.build();\r\n        picker.setVisible(true);\r\n      }\r\n    }\r\n\r\n    async function loadAuth2API() {\r\n      function getAuthInstance() {\r\n        if (typeof gapi !== \"undefined\" && typeof gapi.auth2 !== \"undefined\") {\r\n          return gapi.auth2.getAuthInstance();\r\n        }\r\n        return null;\r\n      }\r\n\r\n      const authInstance = getAuthInstance();\r\n      const isSignedIn = authInstance && authInstance.isSignedIn.get();\r\n      if (isSignedIn) {\r\n        if (!oauthToken) {\r\n          oauthToken = authInstance.currentUser.get().getAuthResponse().access_token;\r\n        }\r\n        return;\r\n      }\r\n\r\n      await gapiLoad(\"auth2\");\r\n      const googleAuth = await gapi.auth2.init({ client_id: clientId });\r\n      console.log(\"loadAuth2API\", googleAuth);\r\n      const result = await googleAuth.signIn({ scope: scope });\r\n      console.log(\"loadAuth2API\", result);\r\n      const authResponse = result.getAuthResponse();\r\n      if (authResponse && !authResponse.error) {\r\n        oauthToken = authResponse.access_token;\r\n      }\r\n    }\r\n\r\n    async function loadPickerAPI() {\r\n      await gapiLoad(\"picker\");\r\n      pickerApiLoaded = true;\r\n    }\r\n\r\n    if (typeof gapi !== \"object\" || gapi === null) {\r\n      reject(new Error(\"gapi not loaded\"));\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const auth2Promise = loadAuth2API();\r\n      const pickerPromise = loadPickerAPI();\r\n      await Promise.all([auth2Promise, pickerPromise]);\r\n      console.log(\"apis loaded\");\r\n      console.log(\"creating picker\");\r\n      createPicker();\r\n    } catch (err) {\r\n      console.error(\"Error selecting Google document\");\r\n      console.error(err);\r\n      reject(err);\r\n    }\r\n  });\r\n}\r\n\r\n\r\nfunction extractPicasaUrl(doc) {\r\n  // https://stackoverflow.com/a/47315488/319878\r\n  if (!doc.thumbnails) {\r\n    return null;\r\n  }\r\n  const [th] = doc.thumbnails;\r\n  if (!th) {\r\n    return null;\r\n  }\r\n  const parts = th.url.split(\"/\");\r\n  parts[parts.length - 2] = \"s0\";\r\n  return parts.join(\"/\");\r\n}\r\n\r\n\r\nfunction extractDocsPhotoUrl(doc) {\r\n  // https://stackoverflow.com/a/11855448/319878\r\n  return \"https://drive.google.com/uc?export=view&id=\" + doc.id;\r\n}\r\n\r\n\r\nfunction extractPublicImageUrl(doc) {\r\n  if (doc.serviceId === \"picasa\") {\r\n    return extractPicasaUrl(doc);\r\n  }\r\n  if (doc.serviceId === \"docs\" && doc.type === \"photo\") {\r\n    if (!doc.isShared) {\r\n      const name = doc.name ? `\"${doc.name}\"` : \"Document\";\r\n      throw new Error(`${name} is not shared (publicly accessible)`);\r\n    }\r\n    return extractDocsPhotoUrl(doc);\r\n  }\r\n  if (doc.serviceId === \"web\" && doc.type === \"photo\") {\r\n    // TODO - not sure how else to deal with this, other than picking the last thumbnail.\r\n    // See sample data below.\r\n    const lastThumbnail = doc.thumbnails[doc.thumbnails.length - 1];\r\n    return lastThumbnail.url;\r\n  }\r\n  return null;\r\n}\r\n\r\n\r\nexport {\r\n  pick,\r\n  extractPublicImageUrl,\r\n  extractPicasaUrl,\r\n};\r\n\r\n\r\n/*\r\n----------------------------------------------\r\nShape of a [serviceId=docs, type=photo] object\r\n----------------------------------------------\r\n\r\n{\r\n \"action\": \"picked\",\r\n \"viewToken\": [\r\n  \"docs-images\",\r\n  null,\r\n  {}\r\n ],\r\n \"docs\": [\r\n  {\r\n   \"id\": \"1umLzQeGagYvLK-nhomAwijEzgyNgdCPL\",\r\n   \"serviceId\": \"docs\",\r\n   \"mimeType\": \"image/png\",\r\n   \"name\": \"test.png\",\r\n   \"description\": \"\",\r\n   \"type\": \"photo\",\r\n   \"lastEditedUtc\": 1556956861493,\r\n   \"iconUrl\": \"https://drive-thirdparty.googleusercontent.com/16/type/image/png\",\r\n   \"url\": \"https://drive.google.com/file/d/1umLzQeGagYvLK-nhomAwijEzgyNgdCPL/view?usp=drive_web\",\r\n   \"embedUrl\": \"https://drive.google.com/file/d/1umLzQeGagYvLK-nhomAwijEzgyNgdCPL/preview?usp=drive_web\",\r\n   \"sizeBytes\": 70909,\r\n   \"rotation\": 0,\r\n   \"rotationDegree\": 0,\r\n   \"parentId\": \"1e83aLBh7XZ-h8c_4uPqU6UOQiumXpW8c\",\r\n   \"isShared\": true\r\n  }\r\n ]\r\n}\r\n\r\n------------------------------------------------\r\nShape of a [serviceId=picasa, type=photo] object\r\n------------------------------------------------\r\n\r\n{\r\n \"action\": \"picked\",\r\n \"viewToken\": [\r\n  \"photos\",\r\n  null,\r\n  {}\r\n ],\r\n \"docs\": [\r\n  {\r\n   \"id\": \"6675206985076925266\",\r\n   \"serviceId\": \"picasa\",\r\n   \"mimeType\": \"application/vnd.google-apps.photo\",\r\n   \"name\": \"logo.long-eaton-storm.png\",\r\n   \"description\": \"\",\r\n   \"type\": \"photo\",\r\n   \"lastEditedUtc\": 1553700206000,\r\n   \"iconUrl\": \"https://ssl.gstatic.com/docs/doclist/images/icon_10_generic_list.png\",\r\n   \"url\": \"https://picasaweb.google.com/105769274988648118810/6675206790673295009#6675206985076925266\",\r\n   \"thumbnails\": [\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-tKPpJTkcvGM/XKMZYtu3Y1I/AAAAAAAAHzk/MSqeQ1AUcoIT8DYw21NVrkur4wygtIO1gCE0YBhgL/s32-c/logo.long-eaton-storm.png\",\r\n     \"width\": 32,\r\n     \"height\": 32\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-tKPpJTkcvGM/XKMZYtu3Y1I/AAAAAAAAHzk/MSqeQ1AUcoIT8DYw21NVrkur4wygtIO1gCE0YBhgL/s64-c/logo.long-eaton-storm.png\",\r\n     \"width\": 64,\r\n     \"height\": 64\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-tKPpJTkcvGM/XKMZYtu3Y1I/AAAAAAAAHzk/MSqeQ1AUcoIT8DYw21NVrkur4wygtIO1gCE0YBhgL/s72-c/logo.long-eaton-storm.png\",\r\n     \"width\": 72,\r\n     \"height\": 72\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-tKPpJTkcvGM/XKMZYtu3Y1I/AAAAAAAAHzk/MSqeQ1AUcoIT8DYw21NVrkur4wygtIO1gCE0YBhgL/s400/logo.long-eaton-storm.png\",\r\n     \"width\": 400,\r\n     \"height\": 400\r\n    }\r\n   ],\r\n   \"sizeBytes\": 29897,\r\n   \"rotation\": 0,\r\n   \"parentId\": \"6675206790673295009\",\r\n   \"version\": 7993,\r\n   \"mediaKey\": \"AF1QipPilGTt42Iv6lSU2DEIDhr4dv0NItw_ymrFuBMZ\"\r\n  }\r\n ],\r\n \"parents\": [\r\n  {\r\n   \"id\": \"6675206790673295009\",\r\n   \"serviceId\": \"picasa\",\r\n   \"mimeType\": \"application/vnd.google-apps.photoalbum\",\r\n   \"name\": \"Bladerunners - Logos\",\r\n   \"description\": \"\",\r\n   \"type\": \"album\",\r\n   \"lastEditedUtc\": 1554192693000,\r\n   \"iconUrl\": \"https://ssl.gstatic.com/docs/doclist/images/icon_10_generic_list.png\",\r\n   \"url\": \"https://picasaweb.google.com/105769274988648118810/6675206790673295009\",\r\n   \"thumbnails\": [\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-S8Aa0vljo8w/XKMZNZhbZqE/AAAAAAAAIXk/n2zbDXzVgxQf6PSb2l9ZPDzG0hZcSXX1ACE0YCg/s32-c/6675206790673295009\",\r\n     \"width\": 32,\r\n     \"height\": 32\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-S8Aa0vljo8w/XKMZNZhbZqE/AAAAAAAAIXk/n2zbDXzVgxQf6PSb2l9ZPDzG0hZcSXX1ACE0YCg/s64-c/6675206790673295009\",\r\n     \"width\": 64,\r\n     \"height\": 64\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-S8Aa0vljo8w/XKMZNZhbZqE/AAAAAAAAIXk/n2zbDXzVgxQf6PSb2l9ZPDzG0hZcSXX1ACE0YCg/s72-c/6675206790673295009\",\r\n     \"width\": 72,\r\n     \"height\": 72\r\n    },\r\n    {\r\n     \"url\": \"https://lh3.googleusercontent.com/-S8Aa0vljo8w/XKMZNZhbZqE/AAAAAAAAIXk/n2zbDXzVgxQf6PSb2l9ZPDzG0hZcSXX1ACE0YCg/s400/6675206790673295009\"\r\n    }\r\n   ],\r\n   \"audience\": \"limited\",\r\n   \"numChildren\": 39,\r\n   \"mediaKey\": \"AF1QipPG_NtlutYXGiDltZt1MF1xCanPHeD5DMr7myKs\"\r\n  }\r\n ]\r\n}\r\n\r\n---------------------------------------------\r\nShape of a [serviceId=web, type=photo] object\r\n---------------------------------------------\r\n\r\n- Note that one thumbnail is a Google-generated thumbnail, and one is the real image.\r\n- Note that the doc.url is the URL of the page where the image was found.\r\n\r\n{\r\n \"action\": \"picked\",\r\n \"viewToken\": [\r\n  \"image-search\",\r\n  null,\r\n  {\r\n   \"license\": \"crwm\",\r\n   \"query\": \"baseball\"\r\n  }\r\n ],\r\n \"docs\": [\r\n  {\r\n   \"id\": \"bcc2b4959e8ce55790d9257d86916eac\",\r\n   \"serviceId\": \"web\",\r\n   \"mimeType\": \"image/jpeg\",\r\n   \"name\": \"Air Force baseball alumni share memories &gt; United States Air Force ...\",\r\n   \"description\": \"Air Force baseball alumni share memories &gt; United States Air Force ...\",\r\n   \"type\": \"photo\",\r\n   \"iconUrl\": \"https://ssl.gstatic.com/docs/doclist/images/icon_10_generic_list.png\",\r\n   \"url\": \"https://www.usafa.af.mil/USAFANews/Article/428854/air-force-baseball-alumni-share-memories/\",\r\n   \"thumbnails\": [\r\n    {\r\n     \"url\": \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_5TcHEaFB2PKebt0EBUFZx1k_3iQOvfLHbLTmGm87M7Wz8mg39rp7YWM\",\r\n     \"width\": 150,\r\n     \"height\": 125\r\n    },\r\n    {\r\n     \"url\": \"https://media.defense.gov/2010/Oct/01/2000320190/-1/-1/0/100925-F-3580W-230.JPG\",\r\n     \"width\": 2400,\r\n     \"height\": 1995\r\n    }\r\n   ]\r\n  }\r\n ]\r\n}\r\n*/\r\n","import React from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CancelIcon from \"@material-ui/icons/Cancel\";\r\n\r\nimport Center from \"../common/Center\";\r\nimport HR from \"../common/HR\";\r\nimport * as picker from \"../google/picker\";\r\nimport SheetsExplorer from \"../sheets/SheetsExplorer\";\r\nimport ErrorBox from \"../common/ErrorBox\";\r\n\r\n\r\nfunction SheetValuePicker({\r\n  sampleData,\r\n  onSave,\r\n}) {\r\n  const [sheetIdx, setSheetIdx] = React.useState(0);\r\n  const sheet = sampleData && sampleData[sheetIdx];\r\n  return (\r\n    <>\r\n      <select\r\n        value={sheetIdx}\r\n        onChange={(e) => setSheetIdx(Number(e.target.value))}\r\n      >\r\n        {\r\n          sampleData && sampleData.map(({ title }, i) => (\r\n            <option key={i} value={i}>{title}</option>\r\n          ))\r\n        }\r\n      </select>\r\n      {sheet && (\r\n        <div style={{ marginTop: \"1em\" }}>\r\n          <SheetsExplorer\r\n            sheets={sheet.sheets}\r\n            cellPadding=\"0.5em\"\r\n            onClickCell={(value) => onSave && onSave(value)}\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nfunction GoogleDocPicker({\r\n  clientId,\r\n  apiKey,\r\n  onSave,\r\n}) {\r\n  const [error, setError] = React.useState(null);\r\n\r\n  const onClickGoogleDoc = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      const picked = await picker.pick({\r\n        clientId,\r\n        apiKey,\r\n      });\r\n      console.log(\"onClickGoogleDoc\", picked);\r\n      if (picked.action === \"picked\") {\r\n        const [doc] = picked.docs;\r\n        const url = picker.extractPublicImageUrl(doc) || doc.url;\r\n        onSave && onSave(url);\r\n      } else {\r\n        const err = (picked.action === \"cancel\")\r\n          ? {\r\n            title: \"Cancelled\",\r\n            message: \"Cancelled picking file\",\r\n          }\r\n          : {\r\n            message: picked.action,\r\n          };\r\n        setError(err);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"onClickGoogleDoc\");\r\n      console.error(err);\r\n      setError({\r\n        message: String(err.error || err.message || err),\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Center>\r\n        <Button variant=\"contained\" onClick={onClickGoogleDoc}>Pick File</Button>\r\n      </Center>\r\n      {error && (\r\n        <>\r\n          <br />\r\n          <ErrorBox\r\n            title={error.title || \"Error picking file\"}\r\n            error={error.message}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\n\r\nfunction DataPicker({\r\n  visible,\r\n  sampleData,\r\n  onSave,\r\n  onRequestClose,\r\n  clientId,\r\n  apiKey,\r\n}) {\r\n  const [tabIdx, setTabIdx] = React.useState(0);\r\n  console.log(\"tabIdx\", tabIdx);\r\n\r\n  const sources = [\r\n    {\r\n      label: \"Data\",\r\n      component: SheetValuePicker,\r\n    },\r\n    {\r\n      label: \"Google Picker\",\r\n      component: GoogleDocPicker,\r\n    },\r\n  ];\r\n  const source = sources[tabIdx];\r\n  const SourceComponent = source && source.component;\r\n\r\n  return (\r\n    <Dialog\r\n      open={visible}\r\n      onClose={onRequestClose}\r\n      style={{\r\n        zIndex: 999,\r\n      }}\r\n    >\r\n      <>\r\n        <AppBar position=\"fixed\">\r\n          <Toolbar>\r\n            <Typography variant=\"h6\" color=\"inherit\">Pick Data</Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <Tabs\r\n          value={tabIdx || 0}\r\n          onChange={(e, value) => setTabIdx(value)}\r\n        >\r\n          {sources && (\r\n            sources.map((source, i) => <Tab key={i} label={source.label}></Tab>)\r\n          )}\r\n        </Tabs>\r\n        <div style={{ padding: \"0.5em\" }}>\r\n          <br />\r\n          {source && (\r\n            <SourceComponent\r\n              sampleData={sampleData}\r\n              clientId={clientId}\r\n              apiKey={apiKey}\r\n              onSave={onSave}\r\n            />\r\n          )}\r\n          <HR />\r\n          <Center>\r\n            <Button variant=\"contained\" onClick={onRequestClose}>\r\n              Close<CancelIcon\r\n                style={{\r\n                  marginLeft: \"0.5em\",\r\n                }}\r\n              />\r\n            </Button>\r\n          </Center>\r\n        </div>\r\n      </>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport {\r\n  GoogleDocPicker,\r\n  SheetValuePicker,\r\n};\r\nexport default DataPicker;\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport preventDefault from \"../common/preventDefault\";\r\n\r\nexport default function EditableText({\r\n  label,\r\n  value,\r\n  useLocalValue,\r\n  onChange,\r\n  onSave,\r\n  onCancel,\r\n}) {\r\n  const [localValue, setLocalValue] = React.useState(value || \"\");\r\n\r\n  console.log(\"EditableText\", value, localValue);\r\n\r\n  const onChangeValue = preventDefault((e) => {\r\n    console.log(\"EditableText.onChangeValue\", \"e.target.value\", e.target.value);\r\n    setLocalValue(e.target.value);\r\n    onChange && onChange(e.target.value);\r\n  });\r\n\r\n  const save = () => {\r\n    console.log(\"EditableText.save\", \"value\", value, \"localValue\", localValue);\r\n    onSave && onSave(localValue);\r\n  };\r\n\r\n  const cancel = () => {\r\n    setLocalValue(value);\r\n    onCancel && onCancel();\r\n  };\r\n\r\n  const onKeyDownValue = (...args) => {\r\n    const [e] = args;\r\n    const handlers = {\r\n      Enter() { save(); },\r\n      Escape() { cancel(); },\r\n    };\r\n    const handler = handlers[e.key];\r\n    if (handler) {\r\n      e.preventDefault();\r\n      handler(...args);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TextField\r\n      label={label}\r\n      fullWidth\r\n      value={useLocalValue ? localValue : value}\r\n      onChange={onChangeValue}\r\n      onKeyDown={onKeyDownValue}\r\n      onBlur={save}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\n\r\nimport DataPicker from \"./DataPicker\";\r\nimport EditableText from \"./EditableText\";\r\n\r\nfunction Flex({ children, flex = 1 }) {\r\n  return <div style={{ flex }}>{children}</div>;\r\n}\r\n\r\nfunction DataInputItem({\r\n  idx,\r\n  item,\r\n  simpleValueSupplier,\r\n  sampleData,\r\n  makeOnSave,\r\n  setShowEditor,\r\n}) {\r\n  const [dirty, setDirty] = React.useState(false);\r\n\r\n  const { id, ...fields } = item;\r\n  const name = \"value\";\r\n  const value = simpleValueSupplier ? simpleValueSupplier(item) : null;\r\n  console.log(\"DataInputItem\", idx, item, value);\r\n\r\n  const renderUndefinedValue = () => <Flex><Button variant=\"contained\" style={{ width: \"100%\" }}>{id}</Button></Flex>\r\n\r\n  const renderBooleanValue = () => (\r\n    <Flex>\r\n      <input\r\n        type=\"checkbox\"\r\n        data-idx={idx}\r\n        name={name}\r\n        checked={value}\r\n        onChange={_onChange}\r\n      />\r\n    </Flex>\r\n  );\r\n\r\n  const renderTextValue = () => (\r\n    <>\r\n      <Flex>\r\n        <EditableText\r\n          label={id}\r\n          value={value}\r\n          sampleData={sampleData}\r\n          useLocalValue={dirty}\r\n          onChange={(value) => setDirty(true)}\r\n          onSave={(value) => {\r\n            setDirty(false);\r\n            makeOnSave(idx, name)(value);\r\n          }}\r\n        />\r\n      </Flex>\r\n      <Flex flex=\"0\">\r\n        <Fab aria-label=\"Edit\" size=\"small\" onClick={\r\n          () => setShowEditor({\r\n            idx,\r\n            onSaveCallback: () => setDirty(false),\r\n          })\r\n        }>\r\n          <EditIcon />\r\n        </Fab>\r\n      </Flex>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <li\r\n      data-idx={idx}\r\n      data-id={item.id}\r\n      style={{ padding: \"0.2em\" }}\r\n    >\r\n      <div style={{ display: \"flex\" }}>\r\n        {\r\n          (typeof value === \"undefined\")\r\n            ? renderUndefinedValue()\r\n            : (typeof value === \"boolean\")\r\n              ? renderBooleanValue()\r\n              : renderTextValue()\r\n        }\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\n/**\r\n * Displays an editable grid of data.\r\n *\r\n * @param {Object} props\r\n * @param {Object[]} props.data\r\n *   The data array. Each data item must have at least an \"id\" field.\r\n * @param {Function} props.onChange\r\n *   Callback for any data changes.\r\n */\r\nexport default function DataInput({\r\n  data,\r\n  sampleData,\r\n  simpleValueSupplier,\r\n  onChange,\r\n}) {\r\n  console.log(\"DataInput.render\", JSON.stringify(data, 2, null));\r\n\r\n  const [showEditor, setShowEditor] = React.useState(null);\r\n\r\n  const makeOnSave = (idx, name) => (value) => {\r\n    console.log(\"DataInput.makeOnSave\", idx, name, value);\r\n    setShowEditor(null);\r\n    onChange({\r\n      type: \"item\",\r\n      idx,\r\n      name,\r\n      value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ul\r\n        style={{ listStyleType: \"none\", margin: 0, padding: 0 }}\r\n      >\r\n        {data && data.map((item, idx) => {\r\n          return <DataInputItem\r\n            key={idx}\r\n            idx={idx}\r\n            item={item}\r\n            simpleValueSupplier={simpleValueSupplier}\r\n            sampleData={sampleData}\r\n            makeOnSave={makeOnSave}\r\n            setShowEditor={setShowEditor}\r\n          />;\r\n        })}\r\n      </ul>\r\n      {console.log(data, showEditor, data && showEditor && data[showEditor.idx])}\r\n      <DataPicker\r\n        visible={Boolean(showEditor)}\r\n        onRequestClose={() => setShowEditor(null)}\r\n        onSave={(value) => {\r\n          showEditor.onSaveCallback();\r\n          makeOnSave(showEditor.idx, \"value\")(value);\r\n        }}\r\n        sampleData={sampleData}\r\n        clientId={\"459216665265-rg4ujqcjinpgo3dlgqaori593ufgr8vr.apps.googleusercontent.com\"}\r\n        apiKey={\"AIzaSyDfg7q3EAFMU4Z1yNRT_hceC5qLWYob40k\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nimport AsyncButton from \"../common/AsyncButton\";\r\nimport HelpPanel from \"../common/HelpPanel\";\r\n\r\nimport DataInput from \"./DataInput\";\r\nimport helpHtml from \"./SetDataTab.help.html\";\r\n\r\nexport default function SetDataTab({\r\n  state,\r\n  sampleData,\r\n  onChangeData,\r\n  onClickUpdateImage,\r\n}) {\r\n  const EYE = \"\";\r\n\r\n  return (\r\n    <>\r\n      <HelpPanel html={helpHtml} />\r\n      {\r\n        state.data && (\r\n          <DataInput\r\n            key={state.dataTimestamp}\r\n            data={state.data}\r\n            sampleData={sampleData}\r\n            onChange={onChangeData}\r\n            simpleValueSupplier={(item) => item.value}\r\n          />\r\n        )\r\n      }\r\n      <br />\r\n      <div>\r\n        <AsyncButton onClick={onClickUpdateImage}>Update image</AsyncButton>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","export function parseSampleData(svg: SVGElement): object | null {\r\n  const el = svg.querySelector(\"#sample\\\\.data\");\r\n  if (!el) {\r\n    return null;\r\n  }\r\n  try {\r\n    return JSON.parse(el.textContent);\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function getSVGAttributeSize(svg: SVGElement): {\r\n  width: string;\r\n  height: string;\r\n} {\r\n  return {\r\n    width: svg.getAttribute(\"width\"),\r\n    height: svg.getAttribute(\"height\"),\r\n  };\r\n}\r\n\r\nexport interface ParseSVGResult {\r\n  svgBoundingClientRect: DOMRect;\r\n  dataIds: string[];\r\n  sampleData: object | null;\r\n}\r\n\r\nexport function parseSVG(svg: SVGElement): ParseSVGResult {\r\n  const svgBoundingClientRect = svg.getBoundingClientRect();\r\n  const dataIds = Array.from(svg.querySelectorAll(\"[id]\"))\r\n    .map((el) => el.id)\r\n    .filter((id) => id.match(/^data\\./));\r\n  const sampleData = parseSampleData(svg);\r\n  return {\r\n    svgBoundingClientRect,\r\n    dataIds,\r\n    sampleData,\r\n  };\r\n}\r\n\r\nexport function makeRelativeImageLinksAbsolute(svgUrlStr: string, svg: SVGElement): void {\r\n  const svgUrl = new URL(svgUrlStr);\r\n\r\n  const images = svg.querySelectorAll(\"image\");\r\n  images.forEach((image) => {\r\n    const xlinkNS = \"http://www.w3.org/1999/xlink\";\r\n    const href = image.getAttributeNS(xlinkNS, \"href\");\r\n    if (href === null) {\r\n      return;\r\n    }\r\n    const isAbsolute = href.trim().match(/^https?:\\/\\//);\r\n    if (isAbsolute) {\r\n      return;\r\n    }\r\n    const url = new URL(href.trim(), svgUrl);\r\n    console.log(href, url);\r\n    image.setAttributeNS(xlinkNS, \"href\", url.toString());\r\n  });\r\n}\r\n\r\nexport function getElementValue(el: Element) {\r\n  switch (el.tagName.toLowerCase()) {\r\n    case \"image\": {\r\n      // console.log(el);\r\n      const href = el.getAttribute(\"xlink:href\");\r\n      // console.log(href);\r\n      const isDataUrl = href.startsWith(\"data:image/\");\r\n      // console.log(isDataUrl);\r\n      return isDataUrl ? null : href;\r\n    }\r\n    default: return el.textContent;\r\n  }\r\n}\r\n\r\nexport function setText(doc: HTMLDocument, id: string, value) {\r\n  const el = doc.getElementById(id);\r\n  const span = el.querySelector(\"tspan\");\r\n  (span || el).textContent = value;\r\n}\r\n\r\nexport function setValue(doc: HTMLDocument, id: string, value) {\r\n  const el = doc.getElementById(id);\r\n  const tagName = el.tagName.toLowerCase();\r\n  if (tagName === \"image\") {\r\n    return el.setAttribute(\"xlink:href\", value);\r\n  }\r\n  return setText(doc, id, value);\r\n}\r\n\r\nexport function setVisible(doc: HTMLDocument, id: string, value) {\r\n  const el = doc.getElementById(id);\r\n  if (el) {\r\n    el.style.display = value ? \"\" : \"none\";\r\n  }\r\n}\r\n","import * as SVG from \"./svg\";\r\nimport Dimensions from \"./Dimensions\";\r\n\r\n// https://stackoverflow.com/a/986977/319878\r\nfunction getScrollBarWidth(): number {\r\n  const inner = document.createElement(\"p\");\r\n  inner.style.width = \"100%\";\r\n  inner.style.height = \"200px\";\r\n\r\n  const outer = document.createElement(\"div\");\r\n  outer.style.position = \"absolute\";\r\n  outer.style.top = \"0px\";\r\n  outer.style.left = \"0px\";\r\n  outer.style.visibility = \"hidden\";\r\n  outer.style.width = \"200px\";\r\n  outer.style.height = \"150px\";\r\n  outer.style.overflow = \"hidden\";\r\n  outer.appendChild(inner);\r\n\r\n  document.body.appendChild(outer);\r\n  const w1 = inner.offsetWidth;\r\n  outer.style.overflow = \"scroll\";\r\n  let w2 = inner.offsetWidth;\r\n  if (w1 === w2) {\r\n    w2 = outer.clientWidth;\r\n  }\r\n\r\n  document.body.removeChild(outer);\r\n\r\n  return (w1 - w2);\r\n}\r\n\r\nexport function scaleSVGWithinIFrame(\r\n  iframe: HTMLIFrameElement,\r\n  svg: SVGElement,\r\n  windowDimensions: Dimensions,\r\n  shouldScale = false,\r\n): void {\r\n  const { width, height } = SVG.getSVGAttributeSize(svg);\r\n  console.log(\"getSVGAttributeSize\", width, height);\r\n\r\n  svg.style.width = width;\r\n  svg.style.height = height;\r\n\r\n  const svgRect = svg.getBoundingClientRect();\r\n\r\n  console.log(\"svgRect\", svgRect);\r\n\r\n  // try and make the SVG scale to the width of the window\r\n  const scale = Math.min(1, shouldScale ? windowDimensions.width / svgRect.width : 1);\r\n\r\n  svg.style.transform = `scale(${scale})`;\r\n  svg.style.transformOrigin = \"0 0\";\r\n\r\n  if (shouldScale) {\r\n    iframe.scrolling = \"no\";\r\n  } else {\r\n    iframe.scrolling = \"yes\";\r\n  }\r\n\r\n  console.log(\"scaleSVG\", svg.style.width, svg.style.height, scale, svg.style.transform);\r\n}\r\n\r\nexport interface DataItem {\r\n  id: string;\r\n  value: string;\r\n  visible: boolean;\r\n}\r\n\r\nexport interface UpdateIFrameWithSVGSourceResult {\r\n  svgBoundingClientRect: DOMRect;\r\n  dataIds: string[];\r\n  data: DataItem[];\r\n  sampleData: object | null;\r\n}\r\n\r\nexport function updateIFrameWithSVGSource(\r\n  iframe: HTMLIFrameElement,\r\n  svgSource: string,\r\n  shouldScale = true,\r\n  windowDimensions: Dimensions,\r\n  svgUrlStr: string,\r\n): UpdateIFrameWithSVGSourceResult {\r\n  const doc = iframe.contentDocument;\r\n\r\n  doc.firstElementChild.innerHTML = `\r\n<style>\r\nhtml, body {\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n</style>\r\n<body>\r\n${svgSource}\r\n</body>\r\n`;\r\n\r\n  const svg = doc.querySelector(\"svg\");\r\n  SVG.makeRelativeImageLinksAbsolute(svgUrlStr, svg);\r\n  const { svgBoundingClientRect, dataIds, sampleData } = SVG.parseSVG(svg);\r\n  const ratio = svgBoundingClientRect.width / svgBoundingClientRect.height;\r\n\r\n  const iframeWidth = Math.min(windowDimensions.width, svgBoundingClientRect.width);\r\n  iframe.width = String(iframeWidth);\r\n  iframe.height = String(iframeWidth / ratio);\r\n\r\n  scaleSVGWithinIFrame(iframe, svg, windowDimensions, shouldScale);\r\n\r\n  const data = dataIds.map((id) => {\r\n    const el = svg.getElementById(id);\r\n    const value = SVG.getElementValue(el);\r\n    return {\r\n      id,\r\n      value,\r\n      visible: true,\r\n    };\r\n  });\r\n\r\n  return {\r\n    svgBoundingClientRect,\r\n    dataIds,\r\n    data,\r\n    sampleData,\r\n  };\r\n}\r\n\r\nexport function updateSVG(svg: SVGElement, data: DataItem[]): void {\r\n  data.forEach(({ id, value, visible }, idx) => {\r\n    if (value !== null) {\r\n      SVG.setValue(svg.ownerDocument, id, value);\r\n    }\r\n    SVG.setVisible(svg.ownerDocument, id, visible);\r\n  });\r\n}\r\n","export default function isListItem(id) {\r\n  const exec = /(.*)\\.(\\d+)$/.exec(id);\r\n  if (!exec) {\r\n    return null;\r\n  }\r\n  return {\r\n    name: exec[1],\r\n    idx: Number(exec[2]),\r\n  };\r\n}\r\n","import minMax from \"../common/minMax\";\r\nimport isListItem from \"./isListItem\";\r\n\r\nexport function arrayMoveValue(data, oldIndex, newIndex) {\r\n  const replaceId = (item, newId) => {\r\n    const { id, ...rest } = item;\r\n    return {\r\n      id: newId,\r\n      ...rest,\r\n    };\r\n  };\r\n\r\n  const oldItem = isListItem(data[oldIndex].id);\r\n  const newItem = isListItem(data[newIndex].id);\r\n  const groupName = oldItem.name;\r\n  if (oldItem.name !== newItem.name) {\r\n    throw new Error(\"Cannot drag items between different groups\");\r\n  }\r\n\r\n  const [min, max] = minMax(oldIndex, newIndex);\r\n\r\n  const reorder = (from, to, startIndex) => {\r\n    return data.slice(from, to).map((old, i) => {\r\n      const newIdx = startIndex + i;\r\n      return replaceId(old, groupName + \".\" + newIdx);\r\n    });\r\n  };\r\n\r\n  let middle = [];\r\n\r\n  if (newIndex > oldIndex) {\r\n    // dragged 'towards the end' of the list\r\n    middle = [\r\n      ...reorder(min + 1, max + 1, oldItem.idx),\r\n      replaceId(data[min], groupName + \".\" + newItem.idx),\r\n    ];\r\n  } else {\r\n    // dragged 'towards the front' of the list\r\n    middle = [\r\n      replaceId(data[max], groupName + \".\" + newItem.idx),\r\n      ...reorder(min, max, newItem.idx + 1),\r\n    ];\r\n  }\r\n\r\n  return [\r\n    ...data.slice(0, min),\r\n    ...middle,\r\n    ...data.slice(max + 1),\r\n  ];\r\n}\r\n\r\nexport function arraySetValue(data, dataIdx, name, value) {\r\n  const data2 = data.slice();\r\n  data2[dataIdx] = {\r\n    ...data2[dataIdx],\r\n    [name]: value,\r\n  };\r\n  return data2;\r\n}\r\n\r\nexport const setValue = (state) => (name, value) => {\r\n  return {\r\n    ...state,\r\n    [name]: value,\r\n  };\r\n};\r\n","export default function minMax(...args) {\r\n  let min = args[0];\r\n  let max = args[0];\r\n  args.forEach((arg) => {\r\n    if (arg < min) {\r\n      min = arg;\r\n    } else if (arg > max) {\r\n      max = arg;\r\n    }\r\n  });\r\n  return [min, max];\r\n}\r\n","import {\r\n  arrayMoveValue,\r\n  arraySetValue,\r\n  setValue,\r\n} from \"./reducer-utils\";\r\n\r\nconst reducer = (state, action) => {\r\n  const set = setValue(state);\r\n  switch (action.type) {\r\n    case \"applyReducer\": {\r\n      const { prop, reducer } = action;\r\n      const oldValue = state[prop];\r\n      const newValue = reducer(oldValue);\r\n      return (oldValue === newValue)\r\n        ? state\r\n        : {\r\n          ...state,\r\n          [prop]: newValue,\r\n        };\r\n    }\r\n    case \"setGeneric\": return set(action.valueName, action.value);\r\n    case \"setSVGSource\": return set(\"svgSource\", action.value);\r\n    case \"setCreatePNGError\": return set(\"createPNGError\", action.value);\r\n    case \"setPNGURL\": return set(\"pngURL\", action.value);\r\n    case \"setShouldScaleSVG\": return set(\"shouldScaleSVG\", action.value);\r\n    case \"setSVGSize\": return set(\"svgSize\", action.value);\r\n    case \"setData\": {\r\n      const state2 = set(\"data\", action.value);\r\n      return {\r\n        ...state2,\r\n        dataTimestamp: Date.now(),\r\n      };\r\n    }\r\n    case \"setSVGEmbeddedData\": {\r\n      const state2 = set(\"data\", action.value);\r\n      console.log(state2);\r\n      return {\r\n        ...state2,\r\n        dataTimestamp: Date.now(),\r\n      };\r\n    };\r\n    case \"setEmbeddedSampleData\": return set(\"embeddedSampleData\", action.value);\r\n    case \"setDataValue\": {\r\n      console.log(\"setDataValue\", action);\r\n      const { dataIdx, name, value } = action.value;\r\n      const old = state.data[dataIdx][name];\r\n      console.log(\"setDataValue\", old, value);\r\n      return (old !== value)\r\n        ? set(\"data\", arraySetValue(state.data, dataIdx, name, value))\r\n        : state;\r\n    }\r\n    case \"moveData\": {\r\n      const { oldIndex, newIndex } = action.value;\r\n      return set(\"data\", arrayMoveValue(state.data, oldIndex, newIndex));\r\n    }\r\n    case \"setImageLoaderFieldset\": {\r\n      console.log(\"setImageLoaderFieldset\", action.value);\r\n      return set(\"imageLoaderFieldset\", action.value);\r\n    };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import * as React from \"react\";\r\n\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\n\r\nimport AsyncButton from \"../common/AsyncButton\";\r\nimport defines from \"../common/defines\";\r\nimport ErrorBox from \"../common/ErrorBox\";\r\nimport HR from \"../common/HR\";\r\nimport { ToolbarWithVersion } from \"../common/ToolbarWithText\";\r\nimport useWindowDimensions from \"../common/useWindowDimensions\";\r\n\r\nimport createPNG from \"./createPNG\";\r\nimport { makeSource as makeGoogleSheetsDataSource } from \"./GoogleSheetsDataLoader\";\r\nimport LoadImageTab from \"./LoadImageTab\";\r\nimport LoadDataTab from \"./LoadDataTab\";\r\nimport SetDataTab from \"./SetDataTab\";\r\nimport { updateIFrameWithSVGSource, updateSVG, scaleSVGWithinIFrame } from \"./svg-iframe\";\r\nimport reducer from \"./reducer\";\r\n\r\nconst svgUrls = [\r\n  \"./svgs/starting-lineup.svg\",\r\n  \"./svgs/starting-lineup-with-opposition.svg\",\r\n  \"./svgs/box-score.svg\",\r\n  \"./svgs/test-fixture.svg\",\r\n  \"./svgs/final-score.svg\",\r\n  \"./svgs/upcoming.svg\",\r\n  \"./svgs/upcoming-I.svg\",\r\n  \"./svgs/upcoming-II.svg\",\r\n  \"./svgs/upcoming-III.svg\",\r\n  \"../img/ty/Bladerunners original badge.svg\",\r\n  \"../img/ty/Bladerunners original logo.svg\",\r\n  \"./svgs/font-test.svg\",\r\n  \"./svgs/tall-test.svg\",\r\n  \"./svgs/wide-test.svg\",\r\n  \"../profile-pics/dom.extracted.diamond.svg\",\r\n];\r\n\r\nconst initialState = {\r\n  url: svgUrls[1],\r\n  svgSource: null,\r\n  pngURL: null,\r\n  createPNGError: null,\r\n  data: null,\r\n  dataTimestamp: null,\r\n  sampleData: null,\r\n  embeddedSampleData: null,\r\n  imageLoaderFieldset: {},\r\n  tabIdx: 0,\r\n  shouldScaleSVG: true,\r\n};\r\n\r\nexport interface AppProps {\r\n  apiKey: string;\r\n  clientId: string;\r\n  spreadsheetId: string;\r\n}\r\n\r\nconst App: React.FC<AppProps> = (props: AppProps) => {\r\n  const {\r\n    apiKey,\r\n    clientId,\r\n    spreadsheetId,\r\n  } = props;\r\n  const windowDimensions = useWindowDimensions();\r\n  const [state, dispatch] = React.useReducer(reducer, initialState);\r\n  const makePropReducer = (prop: string) => (reducer: (state) => any) => dispatch({ type: \"applyReducer\", prop, reducer });\r\n  const iframeRef = React.useRef<HTMLIFrameElement>();\r\n\r\n  const svgFromIFrame = (iframe) => iframe.contentDocument.querySelector(\"svg\");\r\n\r\n  React.useEffect(() => {\r\n    if (iframeRef && iframeRef.current && state.svgSource) {\r\n      scaleSVGWithinIFrame(iframeRef.current, svgFromIFrame(iframeRef.current), windowDimensions, state.shouldScaleSVG);\r\n    }\r\n  }, [state.shouldScaleSVG]);\r\n\r\n  const onChangeData = (e) => {\r\n    console.log(\"onChangeData\", e);\r\n    if (e.type === \"item\") {\r\n      const { idx, name, value } = e;\r\n      return dispatch({ type: \"setDataValue\", value: { dataIdx: idx, name, value } });\r\n    }\r\n    if (e.type === \"move\") {\r\n      const { oldIndex, newIndex } = e;\r\n      return dispatch({ type: \"moveData\", value: { oldIndex, newIndex } });\r\n    }\r\n  };\r\n\r\n  const onClickUpdateImage = async (e) => {\r\n    if (iframeRef && iframeRef.current) {\r\n      updateSVG(svgFromIFrame(iframeRef.current), state.data);\r\n    }\r\n  };\r\n\r\n  const onClickCreatePNG = async (e) => {\r\n    // clear error\r\n    dispatch({ type: \"setCreatePNGError\", value: null });\r\n    try {\r\n      if (!iframeRef.current) {\r\n        throw new Error(\"Can't convert image. No source image loaded.\");\r\n      }\r\n      const svg = svgFromIFrame(iframeRef.current);\r\n      if (!svg) {\r\n        throw new Error(\"Can't convert image. No source SVG.\");\r\n      }\r\n      const svgSource = svg.outerHTML.trim();\r\n      const pngURL = await createPNG(svgSource);\r\n      console.log(pngURL);\r\n      dispatch({ type: \"setPNGURL\", value: pngURL });\r\n    } catch (err) {\r\n      const { createPNG } = err;\r\n      const msg = \"Create PNG failed\";\r\n      const value = (err.message ? err.message + \": \" + msg : msg) + (createPNG ? \"\\n\" + JSON.stringify(createPNG) : \"\");\r\n      dispatch({ type: \"setCreatePNGError\", value });\r\n    }\r\n  };\r\n\r\n  const onChangeSVGSource = (svgSource, svgUrl) => {\r\n    dispatch({ type: \"setSVGSource\", value: svgSource });\r\n    if (iframeRef.current && svgSource) {\r\n      const { data, sampleData } = updateIFrameWithSVGSource(iframeRef.current, svgSource, state.shouldScaleSVG, windowDimensions, svgUrl);\r\n      dispatch({ type: \"setData\", value: data });\r\n      dispatch({ type: \"setEmbeddedSampleData\", value: sampleData });\r\n    }\r\n  };\r\n\r\n  const dataSources = [\r\n    makeGoogleSheetsDataSource({\r\n      apiKey,\r\n      clientId,\r\n      inititialSpreadsheetId: spreadsheetId,\r\n      onSpreadsheetLoaded(spreadsheet) {\r\n        makePropReducer(\"sampleData\")((state) => {\r\n          const state2 = state || [];\r\n          return state2.concat(spreadsheet);\r\n        });\r\n      },\r\n    }),\r\n  ];\r\n\r\n  let combinedSampleData = [];\r\n  if (state.embeddedSampleData) {\r\n    const spreadsheet = {\r\n      title: \"Image Embedded Data\",\r\n      sheets: Object.keys(state.embeddedSampleData).map((key) => {\r\n        const values = state.embeddedSampleData[key];\r\n        return {\r\n          properties: {\r\n            title: key,\r\n          },\r\n          values: values.map((value) => [value]),\r\n        };\r\n      }),\r\n    };\r\n    combinedSampleData.push(spreadsheet);\r\n  }\r\n  if (state.sampleData) {\r\n    combinedSampleData = combinedSampleData.concat(state.sampleData);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <AppBar position=\"static\">\r\n        <ToolbarWithVersion title=\"Image Generator\" gitShort={defines.GIT_SHORT} gitDate={defines.GIT_DATE} />\r\n      </AppBar>\r\n      <Tabs value={state.tabIdx || 0} onChange={(e, value) => dispatch({ type: \"setGeneric\", valueName: \"tabIdx\", value })}>\r\n        <Tab label=\"Load Image\"></Tab>\r\n        <Tab label=\"Load Data\"></Tab>\r\n        <Tab label=\"Set Image Data\"></Tab>\r\n      </Tabs>\r\n      <div style={{ marginTop: \"1em\", marginBottom: \"1em\", padding: \"0 0.5em 0.5em 0.5em\" }}>\r\n        {(state.tabIdx === 0) && (\r\n          <LoadImageTab\r\n            urls={svgUrls}\r\n            state={state.imageLoaderFieldset}\r\n            setState={makePropReducer(\"imageLoaderFieldset\")}\r\n            onChangeSVGSource={onChangeSVGSource}\r\n          />\r\n        )\r\n        }\r\n        {(state.tabIdx === 1) && (\r\n          <LoadDataTab\r\n            dataSources={dataSources}\r\n            data={combinedSampleData}\r\n          />\r\n        )\r\n        }\r\n        {(state.tabIdx === 2) && (\r\n          <SetDataTab\r\n            state={state}\r\n            sampleData={combinedSampleData}\r\n            onChangeData={onChangeData}\r\n            onClickUpdateImage={onClickUpdateImage}\r\n          />\r\n        )}\r\n      </div>\r\n      <HR />\r\n      {\r\n        state.svgSource && (\r\n          <div style={{ textAlign: \"center\" }}>\r\n            <AsyncButton onClick={onClickCreatePNG}>Create PNG</AsyncButton>\r\n            {state.createPNGError && <div><ErrorBox title=\"Error creating PNG\" error={state.createPNGError} inline={true} /></div>}\r\n          </div>\r\n        )\r\n      }\r\n      {state.svgSource && (\r\n        <div>\r\n          <h2>Source Image</h2>\r\n          <FormGroup row>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={!state.shouldScaleSVG}\r\n                  onChange={(e) => dispatch({ type: \"setShouldScaleSVG\", value: !e.target.checked })}\r\n                  value=\"true\"\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label=\"Show SVG normal size\"\r\n            />\r\n          </FormGroup>\r\n          <div id=\"wrap\" style={{ width: \"100%\", overflow: \"auto\" }}>\r\n            <iframe ref={iframeRef} frameBorder=\"0\"></iframe>\r\n          </div>\r\n        </div>\r\n      )\r\n      }\r\n      {\r\n        state.pngURL && (\r\n          <div>\r\n            <h2>PNG Image</h2>\r\n            <img src={state.pngURL} />\r\n          </div>\r\n        )\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <App\r\n    spreadsheetId=\"1kjQZXy-m_ioxhJxHWC5PdeqeIBLsavHWVbq38Fz9ou4\"\r\n    clientId=\"459216665265-rg4ujqcjinpgo3dlgqaori593ufgr8vr.apps.googleusercontent.com\"\r\n    apiKey=\"AIzaSyDsY_aP9gOZD7WWUbpjDnB3aeBSC-zXlhA\"\r\n  />,\r\n  document.getElementById(\"app\")\r\n);\r\n","import { initGoogleClient } from \"./gapi\";\r\n\r\nexport function initGoogleSheets({\r\n  apiKey,\r\n  clientId,\r\n  discoveryDocs = [\"https://sheets.googleapis.com/$discovery/rest?version=v4\"],\r\n  scope = \"https://www.googleapis.com/auth/spreadsheets.readonly\",\r\n  onSignInChanged,\r\n}): Promise<void> {\r\n  return initGoogleClient({\r\n    apiKey,\r\n    clientId,\r\n    discoveryDocs,\r\n    scope,\r\n    onSignInChanged,\r\n  });\r\n}\r\n\r\nfunction ensureProperty(ob, property): boolean {\r\n  const parts = property.split(\".\");\r\n  let curProp = \"\";\r\n  for (const p of parts) {\r\n    if (typeof ob[p] === \"undefined\") {\r\n      throw new Error(`${curProp} not loaded`);\r\n    }\r\n    console.log(p, ob[p]);\r\n    curProp += (curProp ? \".\" : \"\") + p;\r\n    ob = ob[p];\r\n  }\r\n  return true;\r\n}\r\n\r\nexport async function getValuesFromSheet(spreadsheetId, title, cellRange = \"A1:Z500\"): Promise<any[][]> {\r\n  // A1:Z100 used just to try and get all values\r\n  const range = `${title}!${cellRange}`;\r\n  const response = await gapi.client.sheets.spreadsheets.values.get({\r\n    spreadsheetId,\r\n    range,\r\n  });\r\n  console.log(response);\r\n  return response.result.values;\r\n}\r\n\r\nexport interface LoadedSpreadsheet {\r\n  title: string;\r\n  spreadsheetId: string;\r\n  spreadsheetUrl: string;\r\n  raw: gapi.client.sheets.Spreadsheet;\r\n  sheets: {\r\n    properties: gapi.client.sheets.SheetProperties;\r\n    values: any[][];\r\n  }[];\r\n}\r\n\r\nexport async function loadSpreadsheet(\r\n  apiKey: string,\r\n  clientId: string,\r\n  spreadsheetId: string,\r\n  onProgress: (string) => void,\r\n): Promise<LoadedSpreadsheet> {\r\n  onProgress && onProgress(\"Loading Google Sheets API\");\r\n  await initGoogleSheets({\r\n    apiKey,\r\n    clientId,\r\n    onSignInChanged() {\r\n      // no-op\r\n    },\r\n  });\r\n\r\n  ensureProperty(window, \"gapi.client.sheets.spreadsheets\");\r\n\r\n  onProgress && onProgress(\"Loading spreadsheet\");\r\n\r\n  const response = await gapi.client.sheets.spreadsheets.get({\r\n    spreadsheetId,\r\n  });\r\n\r\n  onProgress && onProgress(\"Spreadsheet loaded\");\r\n\r\n  const sheets = await Promise.all(\r\n    response.result.sheets.map(async (sheet, idx) => {\r\n      onProgress && onProgress(`Loading sheet ${idx + 1}/${response.result.sheets.length}`);\r\n      return {\r\n        properties: sheet.properties,\r\n        values: await getValuesFromSheet(spreadsheetId, sheet.properties.title),\r\n      };\r\n    })\r\n  );\r\n\r\n  onProgress && onProgress(`${response.result.sheets.length} sheets loaded`);\r\n\r\n  return {\r\n    title: response.result.properties.title,\r\n    spreadsheetId: response.result.spreadsheetId,\r\n    spreadsheetUrl: response.result.spreadsheetUrl,\r\n    raw: response.result,\r\n    sheets,\r\n  };\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ErrorBox({\r\n  error,\r\n  title,\r\n  inline = false,\r\n}) {\r\n  const cssOuter = {\r\n    border: \"solid 2px red\",\r\n    padding: \"0.5em\",\r\n    background: \"lightyellow\",\r\n    fontWeight: \"bold\",\r\n    color: \"black\",\r\n    display: (inline === true) ? \"inline-block\" : \"\",\r\n  };\r\n  const cssTitle = {\r\n    borderBottom: \"solid 2px red\",\r\n    color: \"red\",\r\n  };\r\n  return (\r\n    <div style={cssOuter}>\r\n      {title && <div style={cssTitle}>{title}</div>}\r\n      {error.message || error}\r\n    </div>\r\n  );\r\n}\r\n","export default function preventDefault(callback) {\r\n  return (...args) => {\r\n    const [e] = args;\r\n    e.preventDefault();\r\n    callback(...args);\r\n  };\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport preventDefault from \"../common/preventDefault\";\r\nimport uuid from \"../common/uuid\";\r\n\r\nexport interface TableProps {\r\n  values: object[][];\r\n  cellPadding: string;\r\n  onClickCell: Function;\r\n}\r\n\r\nexport const Table: React.FunctionComponent<TableProps> = ({\r\n  values,\r\n  cellPadding = \"0\",\r\n  onClickCell,\r\n}: TableProps) => {\r\n  const onClick = (e) => {\r\n    const { target } = e;\r\n    if (target.tagName === \"TD\") {\r\n      onClickCell && onClickCell(target.innerText, target.dataset.rowIndex, target.dataset.index);\r\n    }\r\n  };\r\n\r\n  const className = `cls-${uuid()}`;\r\n  return values && (\r\n    <>\r\n      <style>{`\r\ntable.${className} {\r\n  padding: 0;\r\n  margin: 0;\r\n  border-collapse: collapse;\r\n  empty-cells: show;\r\n}\r\ntable.${className} tr, table.${className} td {\r\n  border: 1px solid lightgrey;\r\n  padding: ${cellPadding};\r\n}\r\n      `}</style>\r\n      <table className={className} cellSpacing=\"0\" cellPadding=\"0\" onClick={onClick}>\r\n        <tbody>\r\n          {\r\n            values.map((row, rowIdx) => (\r\n              <tr key={rowIdx} data-index={rowIdx}>\r\n                {\r\n                  row.map((cell, cellIdx) => <td key={cellIdx} data-index={cellIdx} data-row-index={rowIdx}>{cell}</td>)\r\n                }\r\n              </tr>\r\n            ))\r\n          }\r\n        </tbody>\r\n      </table>\r\n    </>\r\n  );\r\n}\r\n\r\nexport interface SheetsExplorerProps {\r\n  title: string;\r\n  sheets: object[];\r\n  cellPadding: string;\r\n  onClickCell: string;\r\n}\r\n\r\nconst SheetsExplorer: React.FC<SheetsExplorerProps> = ({\r\n  title,\r\n  sheets,\r\n  cellPadding,\r\n  onClickCell,\r\n}: SheetsExplorerProps) => {\r\n  console.log(\"SheetsExplorer\", title, sheets);\r\n\r\n  const [sheetIdx, setSheetIdx] = React.useState(0);\r\n\r\n  const onChangeSheetIdx = preventDefault((e) => setSheetIdx(Number(e.target.value)));\r\n\r\n  const sheet = sheets && sheets[sheetIdx];\r\n\r\n  return (\r\n    <>\r\n      {title && <h3>{title}</h3>}\r\n      <div>\r\n        <select value={sheetIdx} onChange={onChangeSheetIdx}>{\r\n          sheets.map((sheet, i) => (\r\n            <option key={i} value={i}>{sheet.properties.title}</option>\r\n          ))\r\n        }</select>\r\n      </div>\r\n      <div style={{ marginTop: \"1em\" }}>\r\n        {sheet && sheet.values && (\r\n          <Table\r\n            values={sheet.values}\r\n            cellPadding={cellPadding}\r\n            onClickCell={onClickCell}\r\n          />\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SheetsExplorer;\r\n","// https://stackoverflow.com/a/2117523/319878\r\nexport default function uuidv4() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ClickableFieldset({\r\n  legend,\r\n  extraLegend,\r\n  extraLegendSpace = true,\r\n  children,\r\n  help,\r\n}) {\r\n  const [visible, setVisible] = React.useState(true);\r\n  const [helpMode, setHelpMode] = React.useState(false);\r\n\r\n  const onClick = (e) => {\r\n    e.preventDefault();\r\n    setVisible(!visible);\r\n  };\r\n\r\n  const onClickHelp = (e) => {\r\n    e.preventDefault();\r\n    setVisible(true);\r\n    setHelpMode(!helpMode);\r\n  };\r\n\r\n  const fieldsetStyle = {\r\n    border: \"solid 1px lightgrey\",\r\n    padding: \"0.4em\",\r\n  };\r\n\r\n  return (\r\n    <fieldset style={fieldsetStyle}>\r\n      <legend>\r\n        <a href=\"#\" onClick={onClick}>{legend}</a>\r\n        {extraLegend && (\r\n          extraLegendSpace ? <>{\" \"}{extraLegend}</> : extraLegend\r\n        )}\r\n        {help && (\r\n          <>\r\n            {\" \"}\r\n            <a href=\"#\" onClick={onClickHelp} style={{ textDecoration: \"none\" }}>{\"\"}</a>\r\n          </>\r\n        )}\r\n      </legend>\r\n      <div>{visible && (helpMode ? help : children)}</div>\r\n    </fieldset>\r\n  );\r\n}\r\n"],"sourceRoot":""}